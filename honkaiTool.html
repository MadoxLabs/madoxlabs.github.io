
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>Madox Labs - Honkai Impact Tool</title>

  <style>
    body {
      margin: 0px;
    }

    div.my-tooltip {
      background: rgba(40,40,40,0.8);
      display: inline-block;
      border-radius: 4px;
      color: white;
      box-shadow: 1px 1px 3px #aaa;
      padding: 5px 10px;
      margin: 5px 10px;
      line-height: 100%;
      font-size: 15px;
    }

    div.my-tooltip.left-top:before {
      content: "";
      position: absolute;
      width: 0;
      height: 0;
      border-top: 5px solid transparent;
      border-right: 5px solid rgba(40,40,40,0.8);
      border-bottom: 5px solid transparent;
      margin: 1px 0 0 -15px;
    }

    div.header {
      background-color: #000000;
      color: #ffffff;
      position: absolute;
      top: -80px;
      left: 10px;
      font-weight: bold;
      font-size: 2em;
    }

    div.off {
      background-color: #eeeeee;
      color: #aaaaaa;
      font-style: italic;
    }

    div.unmet {
      background-color: #aa0000;
      color: #ffffff;
    }

    div.met {
      background-color: #00aa00;
      color: #ffffff;
    }

    div.menu {
      background-color: #000000;
      color: #ffffff;
      position: absolute;
      top: 0px;
      left: 210px;
      width: 100%;
      height: 128px;
      padding: 0px 0px;
      margin: 0px;
    }

    table.blueTable {
      border: 1px solid #1C6EA4;
      background-color: #EEEEEE;
      width: 100%;
      text-align: left;
      border-collapse: collapse;
      margin: 8px;
    }

    table.blueTable td, table.blueTable th {
      border: 1px solid #AAAAAA;
      padding: 3px 2px;
    }

    table.blueTable tbody td {
      font-size: 13px;
    }

    table.blueTable tr:nth-child(even) {
      background: #D0E4F5;
    }

    table.blueTable thead {
      background: #1C6EA4;
      background: -moz-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      background: -webkit-linear-gradient(top, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      background: linear-gradient(to bottom, #5592bb 0%, #327cad 66%, #1C6EA4 100%);
      border-bottom: 2px solid #444444;
    }

    table.blueTable thead th {
      font-size: 15px;
      font-weight: bold;
      color: #FFFFFF;
      border-left: 2px solid #D0E4F5;
    }

    table.blueTable thead th:first-child {
      border-left: none;
    }

    table.blueTable tfoot td {
      font-size: 14px;
    }

    table.blueTable tfoot .links {
      text-align: right;
    }

    table.blueTable tfoot .links a {
      display: inline-block;
      background: #1C6EA4;
      color: #FFFFFF;
      padding: 2px 8px;
      border-radius: 5px;
    }

    .slider {
      -webkit-appearance: none;
      height: 15px;
      background: #d3d3d3;
      outline: none;
      opacity: 0.7;
      -webkit-transition: .2s;
      transition: opacity .2s;
    }

    .slider:hover {
      opacity: 1;
    }

    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 15px;
      height: 15px;
      background: #4CAF50;
      cursor: pointer;
    }

    .slider::-moz-range-thumb {
      width: 15px;
      height: 15px;
      background: #4CAF50;
      cursor: pointer;
    }

    a {
      text-decoration: none
    }

    span.right {
      text-align: right;
      display: block;
    }
  </style>

  <script type="text/javascript">

    var dataValks = [
      "Divine Prayer:[(B)[Kiana,pistol,PSY],(A)[switch,combo,charge,knockback,(paralyze)[QTE,heal],heal,fracture,weaken,float,timelock,timeslow,bleed,ice,lightning,impair],(S)[crit,def+,debuff,(leader)[dmg+,dmg-]],(SS)[heal,speed+],(SSS)[heal,rescue]]",
      "White Comet:[(B)[Kiana,pistol,MECH],(A)[switch,combo,stun,(float)[QTE,stun],fracture,(leader)hp+],(S)[def+,fire],(SS)[crit],(SSS)[stun]]",
      "Valkyrie Ranger:[(B)[Kiana,pistol,MECH],(A)[combo,pierce,stun,dmg+,speed+,bleed,(freeze)[QTE,aoe,impair],gather],(S)[fire,(leader)[speed+,(MECH)[speed+]],(SS)[def+,crit,(freeze)[crit]],(SSS)[crit]]",
      "Herrscher of the Void:[(B)[Kiana,pistol,BIO],(A)[],(S)[aoe,time prison,speed+,(timeslow)QTE,(timelock)QTE,crit,dmg+,(mech)dmg+,gather,timeslow,dmg-],(SS)[crit,(leader)[crit,critdmg+]],(SSS)[fracture]]",
      "Battle Storm:[(B)[Himeko,sword,BIO,aoe,knockdown,(paralyze)[QTE,knockback],(crit)[],gather,float,fire,charge,weaken,fracture,slow],(S)stun,(SS)ignite]",
      "Kreigsmesser:[(A)[Himeko,sword,PSY,charge,ice,slow,aoe,knockdown,(ignite)[QTE],freeze],(SSS)slow]",
      "Scarlet Fusion:[(A)[Himeko,sword,MECH,charge,float,lightning,paralyze],(S)[(fracture)[QTE],aoe,(ignite)[],(bleed)[]],(SS)bleed]",
      "Valkyrie Triumph:[(A)[Himeko,sword,BIO,fracture,aoe,charge,stun,(freeze),(stun),(leader)[BIO]],(S)[(freeze)[QTE],heal]]",
      "Shadow Dash:[(B)[Mei,MECH]]",
      "Crimson Impulse:[]",
      "Valkyrie Chariot:[]",
      "Dimension Breaker:[]",
      "Yamabuki Armor:[]",
      "Snowy Sniper:[]",
      "Wolf's Dawn:[]",
      "Valkyrie Pledge:[]",
      "Luna Kindred:[]",
      "Night Squire:[]",
      "Umbral Rose:[]",
      "Gyakushinn Miko:[]",
      "Flame Sakitama:[]",
      "Sundenjager:[]",
      "Ritual Imayoh:[]"
    ];

    var dataWeapons = [
      "Desert Eagle:[***,(pistol)[range,dmg+,pierce]]",
      "Artemis' Guardian:[****,(pistol)[range,aoe,float,timelock]]",
      "Water Spirit Type 1:[****,(pistol)[range,(float)dmg+]]",
      "Xuanyuan Pistols:[****,(pistol)[range,lightning,pierce,impair,def-]]",
      "Dark Suns:[****,(pistol)[range,dmg+,move+]]",
      "Alloy Dominators:[****,(pistol)[range,aoe,fire]]",
      "Fire Spirit Type 1:[***,(pistol)[range,ignite]]",
      "Alloy Hurricanes:[****,(pistol)[range,aoe,ice]]",
      "Colt Anaconda:[***,(pistol)[range,aoe,move-]]",
      "Colt Peacemaker:[***,(pistol)[range,aoe,stun]]",
      "Lightning Soul:[****,(katana)[melee,lightning]]",
      "Galactic Nova:[*****,(katana)[melee,dmg+,lightningFX,(star)crit,star,aoe]]",
      "Anemoi:[*****,(katana)[melee,float,ice,aoe,move+,move-]]",
      "Jizo Mitama:[*****,(katana)[melee,summon,float,aoe,(float)dmg+]]",
      "Crystal Edge:[****,(katana)[melee,aoe,freeze]]",
      "Alloy Gluttony:[****,(katana)[melee,aoe,gather,stun]]",
      "Alloy Anemoi:[****,(katana)[melee,aoe,float,ice]]",
      "Muramasa Bloodlust:[***,(katana)[melee,summon,bleed]]",
      "Willow:[***,(katana)[melee,aoe]]",
      "Rosefinch:[***,(katana)[melee,fire]]",
      "Flint Sanada:[*****,(cannon)[range,fire,aoe,speed+,charge]]",
      "Lurker:[*****,(cannon)[range,knockback,stun,speed+,charge]]",
      "Markov Type 4:[****,(cannon)[range,ignite,charge]]",
      "Cathode Type 09:[****,(cannon)[range,pierce,paralyze]]",
      "Alloy Lurker:[****,(cannon)[range,knockback]]",
      "Raider Missiles:[****,(cannon)[range,charge,move+]]",
      "Cathode Type 07:[****,(cannon)[range,pierce,move-]]",
      "Alloy Devourer:[****,(cannon)[range,pierce,fire]]",
      "MIG-7:[***,(cannon)[range,pierce]]",
      "Lightning Angel:[****,(cross)[melee,lightning,aoe,paralyze]]",
      "Hailstone:[***,(cross)[melee,ice,aoe,speed-]]",
      "Oath of Ice:[***,(cross)[melee,ice]]",
      "Cross:[**,(cross)[melee,aoe]]",
      "Wotan's Fists:[*****,(gauntlet)[melee,gather,paralyze,float,def+,dmg+]]",
      "Grips of Tai Xuan:[*****,(gauntlet)[melee,summon,fire,timelock,dmg+]]",
      "Cas-II Namiko:[****,(gauntlet)[melee,pierce]]",
      "Senescence:[*****,(scythe)[melee,aoe,bleed,(bleed)crit]]",
      "Balmung:[*****,(sword)[melee,aoe,dmg+]]",
      "Cleaver of Shamash:[*****,(sword)[melee,fire,dmg+,dmg-,heal]]",
      "Vanguard:[****,(sword)[melee,float,aoe]]",
      "AI-Chan's Hammer:[****,(sword)[melee,knockback,stun]]",
      "Proto Pulse Cleaver:[****,(sword)[melee,dmg+]]",
      "Alloy Betrayer:[****,(sword)[melee,range,aoe]]",
      "Ion Resonance:[****,(sword)[melee,lightning,aoe,paralyze]]",
      "Alloy Wotan's Cleaver:[****,(sword)[melee,aoe,fire]]",
      "Hybred Type-27:[***,(sword)[melee,float]]"
    ];

    var dataStigmata = [
      "Shakespeare (M):[*****,fire,renaissance,(renaissance:x2)[CD+,(PSY)[SP+]],(renaissance:x3)[SP+]]",
      "Himeko New Year (M):[*****,lucky new year,(fireworks)[aoe,heal,fire],(lucky new year:x2)[(fireworks)ignite,fire],(lucky new year:x3)[fire,aoe,stun]",
      "Fu Hua New Year (T):[*****,lucky new year,fireworks,fire,(lucky new year:x2)[(fireworks)ignite,fire],(lucky new year:x3)[fire,aoe,stun]",
      "Theresa New Year (B):[*****,lucky new year,(fireworks)[aoe,dmg+,fire],(lucky new year:x2)[(fireworks)ignite,fire],(lucky new year:x3)[fire,aoe,stun]",
      "Cecilia Formals (T):[*****,reburn party,dmg+,crit,(reburn party:x2)[dmg+],(reburn party:x3)[aoe]]",
      "Higokumaru Formals (M):[*****,reburn party,fire,lightning,ice,dmg-,(reburn party:x2)[dmg+],(reburn party:x3)[aoe]]",
      "Celine (M):[*****,HoV,debuff-,dmg-,(HoV:x2)[(Mei)[crit,critdmg+],(Yae)[crit,critdmg+]],(HoV:x3)[dmg-,dmg+]]",
      "Kepler (T):[*****,ruler of sky,(crit)[],aoe,dmg+,(ruler of sky:x2)[critdmg+],(ruler of sky:x3)[dot,crit]]",
      "Theresa Overlord (B):[*****,homecoming theater,(crit)[],dmg+,move+,(homecoming theater:x2)[summon,dmg+,immune],(homecoming theater:x3)[dmg+,heal]]",
      "Fu Hua Knight (M):[*****,homecoming theater,dmg+,(homecoming theater:x2)[summon,dmg+,immune],(homecoming theater:x3)[dmg+,heal]]",
      "Ai-chan Memories (M):[*****,ice,heal]",
      "Elizabeth Bathory (T):[****,vampiric countess,def+,(vampiric countess:x2)[(melee)[],(BIO)SP+],(vampiric countess:x3)[heal]]",
      "Elizabeth Bathory (M):[****,vampiric countess,def+,(vampiric countess:x2)[(melee)[],(BIO)SP+],(vampiric countess:x3)[heal]]",
      "Elizabeth Bathory (B):[****,vampiric countess,move+,(vampiric countess:x2)[(melee)[],(BIO)SP+],(vampiric countess:x3)[heal]]",
      "Wang Zhaojhun (T):[****,frontier seductress,hp+,(frontier seductress:x2)[(range)dmg+,(PSY)SP+],(frontier seductress:x3)[SP+]]",
      "Wang Zhaojhun (M):[****,frontier seductress,def+,(frontier seductress:x2)[(range)dmg+,(PSY)SP+],(frontier seductress:x3)[SP+]]",
      "Attila (T):[****,scourge of god,speed+,(scourge of god:x2)[crit,(MECH)SP+],(scourge of god:x3)[crit]]",
      "Attila (M):[****,scourge of god,def+,(scourge of god:x2)[crit,(MECH)SP+],(scourge of god:x3)[crit]]",
      "Attila (B):[****,scourge of god,dmg+,(scourge of god:x2)[crit,(MECH)SP+],(scourge of god:x3)[crit]]",

      "Rinaldo (B):[****,berserk knight,(crit)[],heal,(berserk knight:x2)[crit],(berserk knight:x3)[critdmg+]]",
      "Rinaldo (M):[****,berserk knight,aoe,paralyze,(berserk knight:x2)[crit],(berserk knight:x3)[critdmg+]]",
      "Ryunosuke  Akutagawa (T):[****,writer,dmg+,(writer:x2)[shield,crit],(writer:x3)[(melee)dmg+]]",
      "Ryunosuke  Akutagawa (M):[****,writer,crit,(writer:x2)[shield,crit],(writer:x3)[(melee)dmg+]]",
      "Ryunosuke  Akutagawa (B):[****,writer,speed+,(writer:x2)[shield,crit],(writer:x3)[(melee)dmg+]]",
      "Mei Diva (M):[****,crit,(mei)crit]",
      "Nikola Tesla (T):[****,sine twin tails,(paralyze)dmg+,(sine twin tails:x2)[dmg+],(sine twin tails:x3)[lightning]]",
      "Nikola Tesla (B):[****,sine twin tails,(stun)dmg+,(sine twin tails:x2)[dmg+],(sine twin tails:x3)[lightning]]",
      "Sakamoto Ryoma (T):[****,sentyu hassaku,(charge)dmg+,(sentyu hassaku:x2)[dmg+],(sentyu hassaku:x3)[debuff-]]",
      "Edison (T):[****,inventor,lightning,(inventor:x2)[dmg+],(inventor:x3)[def+,(himeko)hp+]]",
      "Edison (M):[****,inventor,shield,(inventor:x2)[],(inventor:x3)][]",
      "Edison (B):[****,inventor,slow,speed+,(inventor:x2)[],(inventor:x3)][]",
      "Naoe Kanetsugu (T):[****,niou dachi,dmg+,crit,(niou dachi:x2)[dmg+],(niou dachi:x3)[dmg+,def+]]",
      "Naoe Kanetsugu (M):[****,niou dachi,fire-,dmg+,(niou dachi:x2)[dmg+],(niou dachi:x3)[dmg+,def+]]",
      "Naoe Kanetsugu (B):[****,niou dachi,heal,(niou dachi:x2)[dmg+],(niou dachi:x3)[dmg+,def+]]",
      "Kiana Summer Surf (T):[****,summer surf(range)dmg+,(summer surf:x2)[(range)[dmg+,aoe]],(summer surf:x3)[speed+]]",
      "Theresa Summer Surf (M):[****,summer surf,(range)crit,(summer surf:x2)[(range)[dmg+,aoe]],(summer surf:x3)[speed+]]",
      "Himeko Summer Surf (B):[****,summer surf,dmg-,hp+,(summer surf:x2)[(range)[dmg+,aoe]],(summer surf:x3)[speed+]]",
      "Teri Teri (M):[****,dmg-]",
      "Shigure Kira (T):[****,solar prominence,(fire)dmg+,(ice)dmg+,(lightning)dmg+,(solar prominence:x2)[dmg-],(solar prominence:x3)[dmg+]]",
      "Shigure Kira (B):[****,solar prominence,fire,ice,lightning,(solar prominence:x2)[dmg-],(solar prominence:x3)[dmg+]]",
      "Winter Princess (T):[****,dmg+,(kiana)freeze]",
      "Himeko Winter (M):[****,hp+,(himeko)[slow,ignite,weaken,impair]]",
      "Himeko Christmas (T):[****,santa claus,move+,(himeko)move+,(santa claus:x2)[(charge)dmg+],(santa claus:x3)[dmg+,(himeko)dmg+]]",
      "Himeko Christmas (M):[****,santa claus,speed-,(santa claus:x2)[(charge)dmg+],(santa claus:x3)[dmg+,(himeko)dmg+]]",
      "Himeko Christmas (B):[****,santa claus,jinglebell,sp+,(himeko)sp+,(santa claus:x2)[(charge)dmg+],(santa claus:x3)[dmg+,(himeko)dmg+]]",
      "Charlemagne (B):[****,charles the great,move+,(charles the great:x2)[atk-,def-],(charles the great:x3)[dmg+,(mei)hp+,(yae)hp+]]",
      "Galileo (M):[****,stargazer,dmg+,(float)dmg+,(stargazer:x2)[(melee)crit],(stargazer:x3)[bleed-]]",
      "Eternal Love (M):[****,hp+,(kiana)[(mei)dmg+],(mei)[(kiana)dmg+]]",
      "Himeko New Year (B):[****,envelope,heal]",
      "Himeko Tuition (M):[****,dmg+,(kiana)crit]",
      "Hannah (T):[***,teutonic order,(switch)dmg+,(QTE)dmg+,(teutonic order:x2)[(melee)dmg+,(kiana)hp+,(kallen)hp+],(teutonic order:x3)[speed+]]",
      "Hannah (M):[***,teutonic order,(switch)dmg+,(QTE)dmg+,(teutonic order:x2)[(melee)dmg+,(kiana)hp+,(kallen)hp+],(teutonic order:x3)[speed+]]",
      "Hannah (B):[***,teutonic order,(switch)dmg+,(QTE)dmg+,(teutonic order:x2)[(melee)dmg+,(kiana)hp+,(kallen)hp+],(teutonic order:x3)[speed+]]",
      "Viola (T):[***,knight hospitaller,hp+,(knight hospitaller:x2)[dmg+],(knight hospitaller:x3)[move+]]",
      "Viola (M):[***,knight hospitaller,hp+,(knight hospitaller:x2)[dmg+],(knight hospitaller:x3)[move+]]",
      "Viola (B):[***,knight hospitaller,hp+,(knight hospitaller:x2)[dmg+],(knight hospitaller:x3)[move+]]",
      "Victoria (T):[***,exiled knight,(melee)dmg+,(exiled knight:x2)[SP+,(himeko)hp+],(exiled knight:x3)[crit]]",
      "Victoria (M):[***,exiled knight,(melee)dmg+,(exiled knight:x2)[SP+,(himeko)hp+],(exiled knight:x3)[crit]]",
      "Victoria (B):[***,exiled knight,(melee)dmg+,(exiled knight:x2)[SP+,(himeko)hp+],(exiled knight:x3)[crit]]",
      "Octavia (T):[***,schicksal order,(combo)dmg+,(schicksal order:x2)[critdmg+,(mei)hp+,(yae)hp+],(schicksal order:x3)[pickup+]]",
      "Octavia (M):[***,schicksal order,(combo)dmg+,(schicksal order:x2)[critdmg+,(mei)hp+,(yae)hp+],(schicksal order:x3)[pickup+]]",
      "Octavia (B):[***,schicksal order,(combo)dmg+,(schicksal order:x2)[critdmg+,(mei)hp+,(yae)hp+],(schicksal order:x3)[pickup+]]",
      "Lucia (T):[***,knight templar,(charge)dmg+,(knight templar:x2)[(range)dmg+,(bronya)hp+],(knight templar:x3)[def+]]",
      "Lucia (M):[***,knight templar,(charge)dmg+,(knight templar:x2)[(range)dmg+,(bronya)hp+],(knight templar:x3)[def+]]",
      "Lucia (B):[***,knight templar,(charge)dmg+,(knight templar:x2)[(range)dmg+,(bronya)hp+],(knight templar:x3)[def+]]",
      "Charlotte (T):[**,hooded archer,(:x2)[dmg+],(:x3)[def+]]",
      "Charlotte (M):[**,hooded archer,(:x2)[dmg+],(:x3)[def+]]",
      "Charlotte (B):[**,hooded archer,(:x2)[dmg+],(:x3)[def+]]",
      "Selena (T):[**,swordsman,(:x2)[(melee)dmg+],(:x3)[hp+]]",
      "Selena (M):[**,swordsman,(:x2)[(melee)dmg+],(:x3)[hp+]]",
      "Selena (B):[**,swordsman,(:x2)[(melee)dmg+],(:x3)[hp+]]"
    ];

    var Valks = [];
    var Weapons = [];
    var Stigmata = [];

    function obj(elem)
    {
      // walk up parents until we fuind an obj
      let e = elem;
      while (e)
      {
        if (e.obj) return e.obj;
        e = e.parentElement;
      }
      return null;
    }

    class BaseUI
    {
      constructor(id)
      {
        this.id = id;

        this.lastHilite = -1;
        this.drawIndex = 0;
        this.divMode = "" + id;
        this.divSelect = "" + id;
        this.elemSearch = "" + id;
        this.elemResult = id + "";
        this.elemProp = id + "";
        this.searchFilter = null;
        this.name = "";
        this.root = null;
        this.results = [];
        this.resultCursor = 0;
      }

      reset()
      {
        document.getElementById(this.divMode).innerHTML = "Select " + this.name + ": <input onmouseover='this.focus()' onmouseout='this.blur()' type=\"text\" id=\"" + this.elemSearch + "\" onchange=\"obj(this).search();\" onkeypress=\"this.onchange();\" onpaste=\"this.onchange();\" oninput=\"this.onchange();\" /><div id=\"" + this.divSelect + "\"></div>";
        this.lastHilite = -1;
        this.root = null;
        app.Set[this.id].Res.resolve(app.Set[this.id]);
        this.resultCursor = 0;
        this.results = [];
        document.getElementById(this.elemResult + "query").innerText = "";

        this.resetExtra();
      }

      resetExtra() { }

      getData() { return null; }

      search()
      {
        let query = document.getElementById(this.elemSearch).value.toLowerCase();

        document.getElementById(this.elemResult + "query").innerText = "'" + query + "'";
        let buf = "";
        this.results = [];
        this.resultCursor = 0;
        if (query.length > 0)
        {
          let data = this.getData();
          for (let i in data)
          {
            if (this.searchFilter && data[i].name.indexOf(this.searchFilter) == -1) continue;

            if (data[i].name.toLowerCase().indexOf(query) != -1)
            {
              this.results.push(i);
            }
          }
        }

        this.drawResults();
      }

      drawResults()
      {
        let buf = "";
        let data = this.getData();
        let revMap = {} // a reverse map of name:index
        let names = [] // a list of the names so we can sort it
        for (let i in this.results)
        {
          revMap[data[this.results[i]].name] = this.results[i];
          names.push(data[this.results[i]].name);
        }
        names.sort();
        for (let i in names)
        {
          buf += "<div id='" + this.elemResult + revMap[names[i]] + "' onmouseover='obj(this).hilite(" + revMap[names[i]] + ")' onclick='obj(this).pick(" + revMap[names[i]] + ")'>" + names[i] + "</div>";
        }

        document.getElementById(this.divSelect).innerHTML = buf;
      }

      hilite(index)
      {
        if (this.lastHilite > -1)
        {
          let item = document.getElementById(this.elemResult + this.lastHilite);
          if (item) item.style.border = "";//"2px solid rgba(0,0,0,0)";
        }
        this.lastHilite = index;
        let item = document.getElementById(this.elemResult + index);
        if (item) item.style.border = "2px solid green";
      }

      outline(index)
      {
        if (this.lastHilite > -1)
        {
          let item = document.getElementById(this.elemProp + this.lastHilite);
          if (item) item.style.border = "";//"2px solid rgba(0,0,0,0)";
        }
        this.lastHilite = index;
        let item = document.getElementById(this.elemProp + index);
        if (item) item.style.border = "2px solid black";
      }

      isSatisfied(item)
      {
        if (!item.if) return true;
        // check all the resolver to see if i am satisfied
        let loc = item.if.indexOf(":x");
        let num = 1;
        let name = item.if;
        if (loc != -1) { name = item.if.substr(0, loc); num = item.if.substr(loc + 2) | 0; }
        return app.Set[this.id].Res.has(name) >= num;
      }

      next()
      {
        if (this.resultCursor < this.results.length-1) this.pick(this.results[this.resultCursor + 1]);
      }

      prev()
      {
        if (this.resultCursor > 0) this.pick(this.results[this.resultCursor - 1]);
      }

      pick(index)
      {
        let data = this.getData();
        this.root = data[index];
        for (let i in this.results) { if (this.results[i] == index) this.resultCursor = i|0; }
        let buf = "Name: " + this.root.name + this.extraControls();
        buf += "<div id='" + this.divSelect + "Props'></div>";
        buf += "<br><button id='" + this.elemResult + "reset' onclick='obj(this).reset()'>Reset</button>";
        document.getElementById(this.divMode).innerHTML = buf;

        app.Set[this.id].Res.resolve(app.Set[this.id]);

        this.draw();
        this.resetExtra();

        if (this.root.name == "Vanguard")
        {
          app.pointAt(10, this.elemProp + "0", "This is a Himeko weapon.<br>Vanguard's properties appear here.");
          setTimeout(function () { app.pointAt(11, "0weapreset", "Reset this again.") }, 5000);
        }

        if (this.root.name == "Galactic Nova")
        {
          app.pointAt(6,this.elemProp + "0", "This is a Mei weapon, so its red.<br>It's properties are greyed out");
          setTimeout(function () { app.pointAt(7,"0weapreset", "Click 'Reset' to clear this pane.") }, 5000);
        }

        if (this.root.name == "Ion Resonance")
        {
          app.pointAt(14, "0prop5", "With 'paralyze' available, Battle Storm's QTE becomes available.<br>THE END!");
          setTimeout(function () { document.getElementById("ftue").style.display = "none"; }, 10000);
        }

        if (this.root.name == "Battle Storm")
        {
          app.pointAt(2,this.elemProp + "16", "This is a list of her properties.<br>S rank is red because she is rank A.");
          setTimeout(function () { app.pointAt(3,"valkRankSelect0", "Drag the Rank slider to make her Rank S.") }, 5000);
        }
      }

      draw()
      {
        if (!this.root) return;
        this.drawIndex = 0;
        document.getElementById(this.divSelect + "Props").innerHTML = this.drawProps(this.root);
      }

      drawPropsDisabled(item)
      {
        let buf = "";
        let props = item.props;
        if (!Array.isArray(props)) props = [props];

        for (let i in props)
        {
          buf += "<div class='off' id='" + this.elemProp + this.drawIndex + "' onclick='obj(this).query(" + this.drawIndex + ")' onmouseout='obj(this).outline(" + this.drawIndex + ")' onmouseover='obj(this).outline(" + this.drawIndex + ")'>" + (props[i].if ? props[i].if : props[i]) + "</div>";
          this.drawIndex += 1;
          if (props[i].if)
            buf += this.drawPropsDisabled(props[i]);
        }
        return buf;
      }

      drawProps(item)
      {
        let buf = "";
        let props = item.props;
        if (!Array.isArray(props)) props = [props];

        for (let i in props)
        {
          if (props[i].if)
          {
            let satisfied = this.isSatisfied(props[i]);
            // if its a QTE one, we can not self-satisfy
            if (props[i].props.includes("QTE"))
            {
              satisfied = false;
              // check other valks
              if (this.id != 0 && app.Set[0].Valk.isSatisfied(props[i])) satisfied = true;
              if (this.id != 1 && app.Set[1].Valk.isSatisfied(props[i])) satisfied = true;
              if (this.id != 2 && app.Set[2].Valk.isSatisfied(props[i])) satisfied = true;
            }
            // check if it is satisfied by our set of objects
            if (satisfied)
            {
              // if so add its props
              buf += "<div class='met' id='" + this.elemProp + this.drawIndex + "' onclick='obj(this).query(" + this.drawIndex + ")' onmouseout='obj(this).outline(" + this.drawIndex + ")' onmouseover='obj(this).outline(" + this.drawIndex + ")'>" + props[i].if + "</div>";
              this.drawIndex += 1;
              buf += this.drawProps(props[i]);
            }
            else
            {
              // if not its red
              buf += "<div class='unmet' id='" + this.elemProp + this.drawIndex + "' onclick='obj(this).query(" + this.drawIndex + ")' onmouseout='obj(this).outline(" + this.drawIndex + ")' onmouseover='obj(this).outline(" + this.drawIndex + ")'>" + props[i].if + "</div>";
              this.drawIndex += 1;
              buf += this.drawPropsDisabled(props[i]);
            }
          }
          else
          {
            buf += "<div id='" + this.elemProp + this.drawIndex + "' onclick='obj(this).query(" + this.drawIndex + ")' onmouseout='obj(this).outline(" + this.drawIndex + ")' onmouseover='obj(this).outline(" + this.drawIndex + ")'>" + props[i] + "</div>";
            this.drawIndex += 1;
          }
        }
        return buf;
      }

      hookup()
      {
        document.getElementById(this.divMode).obj = this;
      }

      extraControls()
      {
        return "";
      }

      query(index)
      {
        let word = document.getElementById(this.elemProp + index).innerText;
        app.Set[this.id].query(word);
      }

      handleQuery(key)
      {
        document.getElementById(this.elemResult + "query").innerText = "'" + key + "'";

        let buf = "";
        this.results = [];
        this.resultCursor = 0;
        if (key.length > 0)
        {
          let data = this.getData();
          for (let i in data)
          {
            if (this.searchFilter && data[i].name.indexOf(this.searchFilter) == -1) continue;

            if (this.hasProp(key,data[i]))
            {
              this.results.push(i);
            }
          }
        }
        this.drawResults();

        if (key == "Himeko")
        {
          app.pointAt(9, "0weap3", "Vanguard showed up. Click it.");
        }
        if (key == "paralyze")
        {
          app.pointAt(13, "0weap7", "Ion Resonance showed up. This weapon causes paralyzation. Click it.");
        }
      }

      hasProp(key, item)
      {
        let props = item.props;
        if (!Array.isArray(props)) props = [props];

        for (let i in props)
        {
          if (props[i].if)
          {
            if (props[i].if == key) return true;
            if (this.hasProp(key, props[i])) return true;
          }
          else if (props[i] == key) return true;
        }
        return false;
      }

    };

    class ValkUI extends BaseUI
    {
      constructor(id)
      {
        super(id);
        this.divMode = "valkMode" + id;
        this.divSelect = "valkSelect" + id;
        this.elemSearch = "valkSearch" + id;
        this.elemResult = id + "valk";
        this.elemProp = id + "prop";
        this.name = "Valkyrie";
        this.rank = "A";
        this.hookup();
      }

      resetExtra()
      {
        if (app.Set[this.id].Weap.root) { app.Set[this.id].Weap.draw(); }
        if (app.Set[this.id].TStig.root) { app.Set[this.id].TStig.draw(); }
        if (app.Set[this.id].MStig.root) { app.Set[this.id].MStig.draw(); }
        if (app.Set[this.id].BStig.root) { app.Set[this.id].BStig.draw(); }

        if (this.id != 0) app.Set[0].Valk.draw();
        if (this.id != 1) app.Set[1].Valk.draw();
        if (this.id != 2) app.Set[2].Valk.draw();
      }

      getData() { return Valks; }

      setrank()
      {
        let elem = document.getElementById("valkRankSelect" + this.id);
        if (elem)
        {
          switch (elem.value|0)
          {
            case 1: this.rank = "B"; break;
            case 2: this.rank = "A"; break;
            case 3: {
              this.rank = "S"; app.pointAt(4,this.elemProp + "16", "Now she is S Rank! More properties appear.");
              setTimeout(function () { app.pointAt(5,app.Set[0].Weap.elemSearch, "Now lets search for 'Galactic Nova'!") },5000);
              break;
            }
            case 4: this.rank = "SS"; break;
            case 5: this.rank = "SSS"; break;
          }

          app.Set[this.id].Res.resolve(app.Set[this.id]);

          this.draw();
          this.resetExtra();
          document.getElementById("valkRank" + this.id).innerHTML = "<b>" + this.rank + "</b>";
        }
      }

      extraControls()
      {
        return "<br>Rank: <span id=\"valkRank" + this.id + "\"><b>A</b></span> <input class='slider' oninput = 'obj(this).setrank()' type=\"range\" min=\"1\" max=\"5\" value=\"2\" id=\"valkRankSelect" + this.id + "\"><br><br>";
      }
    };

    class WeapUI extends BaseUI
    {
      constructor(id)
      {
        super(id);
        this.divMode = "weapMode" + id;
        this.divSelect = "weapSelect" + id;
        this.elemSearch = "weapSearch" + id;
        this.elemResult = id + "weap";
        this.elemProp = id + "wprop";
        this.name = "Weapon";
        this.hookup();
      }

      getData() { return Weapons; }

      resetExtra()
      {
        if (app.Set[this.id].Valk.root) { app.Set[this.id].Valk.draw(); }
        if (app.Set[this.id].TStig.root) { app.Set[this.id].TStig.draw(); }
        if (app.Set[this.id].MStig.root) { app.Set[this.id].MStig.draw(); }
        if (app.Set[this.id].BStig.root) { app.Set[this.id].BStig.draw(); }

        if (this.id != 0) app.Set[0].Valk.draw();
        if (this.id != 1) app.Set[1].Valk.draw();
        if (this.id != 2) app.Set[2].Valk.draw();

        if (document.getElementById(app.Set[0].Valk.elemProp + "1"))
          app.pointAt(8,app.Set[0].Valk.elemProp + "1", "Now click on Himeko's name to search for her weapons.");

        app.pointAt(12, "0prop5", "Battle Storm can make use of the paralyze skill.<br>It is red because nothing is providing the paralyze skill<br>Lets search for something. Click 'paralyze'");

      }
    };

    class StigUI extends BaseUI
    {
      constructor(id, type)
      {
        super(id);
        this.divMode = type + "stigMode" + id;
        this.divSelect = type + "stigSelect" + id;
        this.elemSearch = type + "stigSearch" + id;
        this.elemResult = id + type + "stig";
        this.elemProp = id + type + "sprop";
        this.name = type + " Stigmata";
        this.searchFilter = "(" + type + ")";
        this.type = type;
        this.hookup();
      }

      getData() { return Stigmata; }

      resetExtra()
      {
        if (app.Set[this.id].Valk.root) { app.Set[this.id].Valk.draw(); }
        if (app.Set[this.id].Weap.root) { app.Set[this.id].Weap.draw(); }
        if (this.type != "T" && app.Set[this.id].TStig.root) { app.Set[this.id].TStig.draw(); }
        if (this.type != "M" && app.Set[this.id].MStig.root) { app.Set[this.id].MStig.draw(); }
        if (this.type != "B" && app.Set[this.id].BStig.root) { app.Set[this.id].BStig.draw(); }

        if (this.id != 0) app.Set[0].Valk.draw();
        if (this.id != 1) app.Set[1].Valk.draw();
        if (this.id != 2) app.Set[2].Valk.draw();
      }
    };

    class Set
    {
      Valk = null;
      Weap = null;
      TStig = null;
      MStig = null;
      BStig = null;
      Res = null;

      constructor(id)
      {
        this.Valk = new ValkUI(id);
        this.Weap = new WeapUI(id);
        this.TStig = new StigUI(id, "T");
        this.MStig = new StigUI(id, "M");
        this.BStig = new StigUI(id, "B");
        this.Res = new Resolver();
      }

      reset()
      {
        this.Valk.reset();
        this.Weap.reset();
        this.TStig.reset();
        this.MStig.reset();
        this.BStig.reset();
      }

      query(key)
      {
        if (this.Valk.root == null) this.Valk.handleQuery(key);
        if (this.Weap.root == null) this.Weap.handleQuery(key);
        if (this.TStig.root == null) this.TStig.handleQuery(key);
        if (this.MStig.root == null) this.MStig.handleQuery(key);
        if (this.BStig.root == null) this.BStig.handleQuery(key);
      }
    };

    ftuestep = 1000;

    class App
    {
      Set = [];
      All = new Resolver();

      constructor()
      {
        this.Set[0] = new Set(0);
        this.Set[1] = new Set(1);
        this.Set[2] = new Set(2);

        this.All.allowEverything();
        for (let i in dataValks) { let o = parseObject(dataValks[i]); this.All.processItem(o); Valks.push(o); }
        for (let i in dataWeapons) { let o = parseObject(dataWeapons[i]); this.All.processItem(o); Weapons.push(o); }
        for (let i in dataStigmata) { let o = parseObject(dataStigmata[i]); this.All.processItem(o); Stigmata.push(o); }
        this.All.resolveIf();
        this.propSearch();
      }

      stopTutorial()
      {
        ftuestep = 99;
        document.getElementById("ftue").style.display = "none";
      }

      pointAt(step,name,text)
      {
        if (step != ftuestep) return;
        ftuestep += 1;
        let elem = document.getElementById(name).getBoundingClientRect();
        let ftue = document.getElementById("ftue");
        ftue.style.position = "absolute";
        ftue.style.left = elem.right + 'px';
        ftue.style.top = elem.top + 'px';
        ftue.innerHTML = text;
      }

      prevValk(id) { this.Set[id].Valk.prev(); }
      nextValk(id) { this.Set[id].Valk.next(); }
      prevWeap(id) { this.Set[id].Weap.prev(); }
      nextWeap(id) { this.Set[id].Weap.next(); }
      prevStigT(id) { this.Set[id].StigT.prev(); }
      nextStigT(id) { this.Set[id].StigT.next(); }
      prevStigB(id) { this.Set[id].StigB.prev(); }
      nextStigB(id) { this.Set[id].StigB.next(); }
      prevStigM(id) { this.Set[id].StigM.prev(); }
      nextStigM(id) { this.Set[id].StigM.next(); }

      reset() { for (let i in this.Set) this.Set[i].reset(); }

      propSearch()
      {
        let name = document.getElementById('psearch').value;
        let list = this.All.getPropsMatching(name);
        let select = document.getElementById('presult');
        select.innerHTML = "";
        for (let i in list)
        {
          var opt = document.createElement('option');
          opt.value = list[i];
          opt.innerHTML = list[i];
          select.appendChild(opt);
        }
      }

      searchProp()
      {
        let e = document.getElementById('presult');
        let key = e.options[e.selectedIndex].value;
        this.Set[0].query(key);
        this.Set[1].query(key);
        this.Set[2].query(key);
      }
    };

    class Resolver
    {
      props = {};
      ifs = [];
      everything = false;

      constructor()
      {
      }

      allowEverything()
      {
        this.everything = true;
      }

      getPropsMatching(name)
      {
        let result = [];
        for (let i in this.props)
        {
          if (i.toLowerCase().indexOf(name.toLowerCase()) != -1) result.push(i);
        }
        return result.sort();
      }

      has(key) { return this.props[key]; }

      setProp(prop)
      {
        if (!this.props[prop]) this.props[prop] = 1;
        else this.props[prop] = this.props[prop] + 1;
      }

      resolve(set)
      {
        this.props = {};
        this.ifs = [];
        if (set.Valk.root)
        {
          // special case - valk rank
          if (set.Valk.id == 0) { this.setProp("leader"); }
          if (set.Valk.rank == "B")   { this.setProp("B"); }
          if (set.Valk.rank == "A")   { this.setProp("B"); this.setProp("A");  }
          if (set.Valk.rank == "S")   { this.setProp("B"); this.setProp("A"); this.setProp("S"); }
          if (set.Valk.rank == "SS")  { this.setProp("B"); this.setProp("A"); this.setProp("S"); this.setProp("SS"); }
          if (set.Valk.rank == "SSS") { this.setProp("B"); this.setProp("A"); this.setProp("S"); this.setProp("SS"); this.setProp("SSS");}
          this.processItem(set.Valk.root);
        }
        if (set.Weap.root) this.processItem(set.Weap.root);
        if (set.TStig.root) this.processItem(set.TStig.root);
        if (set.BStig.root) this.processItem(set.BStig.root);
        if (set.MStig.root) this.processItem(set.MStig.root);
        this.resolveIf();
      }

      resolveIf()
      {
        while (this.processIf()) { }
      }

      processItem(obj)
      {
        for (let i in obj.props)
        {
          if (obj.props[i].if)
          {
            this.ifs.push(obj.props[i]);
          }
          else
          {
            this.processProp(obj.props[i]);
          }
        }
      }

      processProp(item)
      {
        let props = item.props;
        if (!props) props = item;
        if (!Array.isArray(props)) props = [props];

        for (let i in props)
        {
          if (props[i].if)
          {
            this.ifs.push(props[i]);
          }
          else
          {
            this.setProp(props[i]);
          }
        }
      }

      processIf()
      {
        let ret = false;
        let newifs = [];
        for (let i in this.ifs)
        {
          if (!this.ifs[i]) continue;
          if (this.everything || this.props[this.ifs[i].if])
          {
            this.processProp(this.ifs[i]);
            ret = true;
          }
          else
          {
            newifs.push(this.ifs[i]);
          }
        }
        this.ifs = newifs;
        return ret;
      }
    };

    var app = null;

    function init()
    {
      app = new App();
      app.reset();
      app.pointAt(1,app.Set[0].Valk.elemSearch, "Try searching for 'Battle Storm'<br>Click her name when it appears.");

    }

    function parseObject(data)
    {
      // data := key ":" props
      // props := "[" item ("," item) "]"
      // item := (if) props
      // if := "(" key ")"

      // get the name
      let loc = data.indexOf(':');
      if (loc == -1) return null;
      let name = data.substr(0, loc);
      let props = data.substr(loc + 1);
      // make item
      let item = { name: name, props: parseProps(props) };
      return item;
    }

    function parseProps(data)
    {
      let ret = [];
      do
      {
        // start with [, end with ]
        if (data[0] != '[') break;
        if (data[data.length - 1] != ']') break;
        // split into seperate terms
        let inside = 0;
        let start = 1;
        for (let x = start; x < data.length - 1; ++x)
        {
          switch (data[x])
          {
            case '[': inside++; break;
            case ']': inside--; break;
            case ',': if (!inside) { ret.push(parseItem(data.substr(start, x - start))); start = x + 1; break; }
          }
        }
        if (start < data.length - 1) ret.push(parseItem(data.substr(start, data.length - start - 1)));
      } while (false);
      return ret;
    }

    function parseItem(data)
    {
      // check for if
      if (data[0] == '(')
      {

        let loc = data.indexOf(')');
        let ifkey = data.substr(1, loc - 1);
        if (data[loc + 1] == '[')
          return { if: ifkey, code: 1, props: parseProps(data.substr(loc + 1)) };
        else
          return { if: ifkey, code: 1, props: parseItem(data.substr(loc + 1)) };
      }
      // its just a key
      else
      {
        return data;
      }
    }

    animImage = new Image();
    animImage.src = "frontpage/animatedlogo.gif";
    staticImage = new Image();
    staticImage.src = "frontpage/logo.jpg";
  </script>
</head>

<body onload="init();">
  <div class="header">
    <a href='#1' onmouseover="logo.src=animImage.src;" onmouseout="logo.src=staticImage.src;"><img name="logo" src="frontpage/logo.jpg" /></a>
  </div>
  <div class="menu">
    HONKAI IMPACT TOOL<br /><br />
    <button onclick="app.stopTutorial();">Skip Tutorial</button><br />
    Search for a property: <input id="psearch" onmouseover='this.focus()' onmouseout='this.blur()' type="text" onchange="app.propSearch();" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"/><select id="presult"></select>
    <button onclick="app.searchProp();">Search</button><br />
  </div>
  <div style="position: absolute; top:130px">
  <table class="blueTable">
    <thead><tr><td colspan="5">VALKYRIE 1</td></tr></thead>
    <tbody>
      <tr>
        <td width="300px">
          <div><b>Valkyrie <span class="right"><span id="0valkquery"></span><a href="#" onclick="app.prevValk(0); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextValk(0); return false;">Next&gt;</a></span></b></div>
          <div id="valkMode0"></div>
        </td>
        <td valign="top">
          <div><b>Weapon <span class="right"><span id="0weapquery"></span><a href="#" onclick="app.prevWeap(0); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextWeap(0); return false;">Next&gt;</a></span></b></div>
          <div id="weapMode0"></div>
        </td>
        <td valign="top">
          <div><b>Top Stigmata <span class="right"><span id="0Tstigquery"></span><a href="#" onclick="app.prevStigT(0); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigT(0); return false;">Next&gt;</a></span></b></div>
          <div id="TstigMode0"></div>
        </td>
        <td valign="top">
          <div><b>Middle Stigmata <span class="right"><span id="0Mstigquery"></span><a href="#" onclick="app.prevStigM(0); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigM(0); return false;">Next&gt;</a></span></b></div>
          <div id="MstigMode0"></div>
        </td>
        <td valign="top">
          <div><b>Bottom Stigmata <span class="right"><span id="0Bstigquery"></span><a href="#" onclick="app.prevStigB(0); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigB(0); return false;">Next&gt;</a></span></b></div>
          <div id="BstigMode0"></div>
        </td>
      </tr>
    </tbody>
  </table>
  <br />
  <table class="blueTable">
    <thead><tr><td colspan="5">VALKYRIE 2</td></tr></thead>
    <tbody>
      <tr>
        <td width="300px">
          <div><b>Valkyrie <span class="right"><span id="1valkquery"></span><a href="#" onclick="app.prevValk(1); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextValk(1); return false;">Next&gt;</a></span></b></div>
          <div id="valkMode1"></div>
        </td>
        <td valign="top">
          <div><b>Weapon <span class="right"><span id="1weapquery"></span><a href="#" onclick="app.prevWeap(1); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextWeap(1); return false;">Next&gt;</a></span></b></div>
          <div id="weapMode1"></div>
        </td>
        <td valign="top">
          <div><b>Top Stigmata <span class="right"><span id="1Tstigquery"></span><a href="#" onclick="app.prevStigT(1); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigT(1); return false;">Next&gt;</a></span></b></div>
          <div id="TstigMode1"></div>
        </td>
        <td valign="top">
          <div><b>Middle Stigmata <span class="right"><span id="1Mstigquery"></span><a href="#" onclick="app.prevStigM(1); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigM(1); return false;">Next&gt;</a></span></b></div>
          <div id="MstigMode1"></div>
        </td>
        <td valign="top">
          <div><b>Bottom Stigmata <span class="right"><span id="1Bstigquery"></span><a href="#" onclick="app.prevStigB(1); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigB(1); return false;">Next&gt;</a></span></b></div>
          <div id="BstigMode1"></div>
        </td>
      </tr>
    </tbody>
  </table>
  <br />
  <table class="blueTable">
    <thead><tr><td colspan="5">VALKYRIE 3</td></tr></thead>
    <tbody>
      <tr>
        <td width="300px">
          <div><b>Valkyrie <span class="right"><span id="2valkquery"></span><a href="#" onclick="app.prevValk(2); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextValk(2); return false;">Next&gt;</a></span></b></div>
          <div id="valkMode2"></div>
        </td>
        <td valign="top">
          <div><b>Weapon <span class="right"><span id="2weapquery"></span><a href="#" onclick="app.prevWeap(2); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextWeap(2); return false;">Next&gt;</a></span></b></div>
          <div id="weapMode2"></div>
        </td>
        <td valign="top">
          <div><b>Top Stigmata <span class="right"><span id="2Tstigquery"></span><a href="#" onclick="app.prevStigT(2); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigT(2); return false;">Next&gt;</a></span></b></div>
          <div id="TstigMode2"></div>
        </td>
        <td valign="top">
          <div><b>Middle Stigmata <span class="right"><span id="2Mstigquery"></span><a href="#" onclick="app.prevStigM(2); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigM(2); return false;">Next&gt;</a></span></b></div>
          <div id="MstigMode2"></div>
        </td>
        <td valign="top">
          <div><b>Bottom Stigmata <span class="right"><span id="2Bstigquery"></span><a href="#" onclick="app.prevStigB(2); return false;">&lt;Prev</a>&nbsp;<a href="#" onclick="app.nextStigB(2); return false;">Next&gt;</a></span></b></div>
          <div id="BstigMode2"></div>
        </td>
      </tr>
    </tbody>
  </table>
  </div>
  <div  class="my-tooltip left-top" id="ftue">This is some help text</div>
</body>
</html>
