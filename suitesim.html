<html>
<head>
  <title>SUITE SIMULATOR</title>
  <script>
    var run = false;
    var events = {};

    function advance()
    {
      let time = document.getElementById("hours").innerText | 0;
      let clams = document.getElementById("clams").value | 0;
      let pops = document.getElementById("pops").value | 0;
      let happys = document.getElementById("happys").value | 0;
      let clamshr = document.getElementById("clamshr").value | 0;
      let popshr = document.getElementById("popshr").value | 0;

      time += 1;

      // handle event
      if (events[time])
      {
        if (events[time].clams) clams += events[time].clams;
        if (events[time].pops) pops += events[time].pops;
        if (events[time].happys) happys += events[time].happys;
        if (events[time].clamshr) clamshr += events[time].clamshr;
        if (events[time].popshr) popshr += events[time].popshr;
      }

      clams += clamshr;
      pops += popshr;

      document.getElementById("hours").innerText = time;
      document.getElementById("days").innerText = time / 24.0;

      document.getElementById("clams").value = clams;
      document.getElementById("happys").value = happys;
      document.getElementById("pops").value = pops;
      document.getElementById("clamshr").value = clamshr;
      document.getElementById("popshr").value = popshr;

      if (run) setTimeout(advance, 1000);
    }

    function toggle()
    {
      if (run)
      {
        run = false;
        document.getElementById("clams").disabled = false;
        document.getElementById("happys").disabled = false;
        document.getElementById("pops").disabled = false;
        document.getElementById("clamshr").disabled = false;
        document.getElementById("popshr").disabled = false;
      }
      else
      {
        run = true;
        document.getElementById("clams").disabled = true;
        document.getElementById("happys").disabled = true;
        document.getElementById("pops").disabled = true;
        document.getElementById("clamshr").disabled = true;
        document.getElementById("popshr").disabled = true;
        setTimeout(advance, 1000);
      }
    }

    function reset()
    {
      run = false;
      document.getElementById("clams").disabled = false;
      document.getElementById("happys").disabled = false;
      document.getElementById("pops").disabled = false;
      document.getElementById("clamshr").disabled = false;
      document.getElementById("popshr").disabled = false;
      document.getElementById("hours").innerText = 0;
      document.getElementById("days").innerText = 0;
      document.getElementById("clams").value = 26;
      document.getElementById("happys").value = 1;
      document.getElementById("pops").value = 48;
      document.getElementById("clamshr").value = 3;
      document.getElementById("popshr").value = 1;
    }

    function load()
    {
      let data = document.getElementById("events").value;
      events = JSON.parse(data);
    }
  </script>
</head>
<body>
  <h2>SEELE'S SUITE SIMULATOR</h2>
  <h3>MADOXLABS</h3><br /><br />
  <br />
  <table>
    <tr><td>Clams:</td><td><input type="text" id="clams" value="0" /></td><td>Per hr:</td><td><input type="text" id="clamshr" value="0" /></td></tr>
    <tr><td>Pops:</td><td><input type="text" id="pops" value="0" /></td><td>Per hr:</td><td><input type="text" id="popshr" value="0" /></td></tr>
    <tr><td>Happys:</td><td><input type="text" id="happys" value="0" /></td><td></td><td></td></tr>
  </table>

  Time: <span id="hours">0</span> hrs - <span id="days">0</span> days<br />

  <button onclick="advance();">+1 hr</button><button onclick="toggle();">Start</button><button onclick="reset();">Reset</button>
  <br />
  Events: <br />
  <textarea rows="10" cols="40" id="events"></textarea><br />
  <button onclick="load();">Load</button>
  <br />

</body>
</html>